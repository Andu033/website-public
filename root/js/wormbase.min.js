+function(a,b,c){var d=a.location,e=function(){function f(){var b=$jq("#header").data("page"),c=$jq("#all-search-results"),e;a.onhashchange=L;if($jq(".user-history").size()>0){function f(){q($jq(".user-history"),"/rest/history?count=3"),setTimeout(f,6e5);return}f()}$jq(".list-layouts").size()>0&&q($jq(".list-layouts"),"/rest/layout_list/"+$jq(".list-layouts").attr("type")),$jq.post("/rest/history",{ref:b.ref,name:b.name,id:b.id,"class":b["class"],type:b.type,is_obj:b.is_obj}),w(b["class"]),$jq("#top-system-message").size()>0&&o("show");if(c.size()>0){var g=c.data("search");z(g.type,g.species,g.query)}_.init(),Y.init(b),Z.init(b),$jq(".workbench-status-"+b.wbid).size()>0&&$jq(".workbench-status-"+b.wbid).load("/rest/workbench/star?wbid="+b.wbid+"&name="+b.name+"&class="+b["class"]+"&type="+b.type+"&id="+b.id+"&url="+b.ref+"&save_to="+b.save+"&is_obj="+b.is_obj),V(b.ref);if(d.hash.length>0)L();else if(e=$jq("#widget-holder").data("layout"))e.hash?d.hash=e.hash:(R(e.leftlist,e.rightlist||[],e.leftwidth||100),E=!1,P());h(),j(),k(),l()}function h(){t(),$jq("#nav-bar").find("ul li").hover(function(){$jq("div.columns>ul").hide(),g&&($jq(this).siblings("li").children("ul.dropdown").hide(),$jq(this).siblings("li").children("a").removeClass("hover"),$jq(this).children("ul.dropdown").find("a").removeClass("hover"),$jq(this).children("ul.dropdown").find("ul.dropdown").hide(),clearTimeout(g),g=c),$jq(this).children("ul.dropdown").show(),$jq(this).children("a").addClass("hover")},function(){var a=$jq(this);g&&(clearTimeout(g),g=c),g=setTimeout(function(){a.children("ul.dropdown").hide(),a.children("a").removeClass("hover")},300)}),q($jq(".status-bar"),"/rest/auth")}function j(){r(),$jq("#print").click(function(){var a=d.hash.replace("#",""),b=$jq(this);$jq.ajax({type:"POST",url:"/rest/print",data:{layout:a},beforeSend:function(){e.setLoading(b)},success:function(a){b.html(""),d.href=a},error:function(a,b,c){alert(a+" "+b+" "+c)}})}),$jq(".section-button").click(function(){var a=$jq(this).attr("wname");$jq("#nav-"+a).trigger("open"),I(a)}),$jq(".sortable").size()>0&&$jq(".sortable").sortable({handle:".widget-header, #widget-footer",items:"li.widget",placeholder:"placeholder",connectWith:".sortable",opacity:.6,forcePlaceholderSize:!0,update:function(a,b){P()}}),$jq("#widget-holder").children("#widget-header").disableSelection(),$jq("#column-dropdown").find("a, div.columns div.ui-icon, div.columns>ul>li>a").click(function(){$jq("div.columns>ul").toggle()}),$jq("#nav-min").click(function(){var a=$jq("#navigation"),b=$jq("#page-title"),c=a.width(),d="open sidebar",e="-1em";c==0?(c="12em",d="close sidebar",e=175):c=0,a.animate({width:c}).show(),b.animate({marginLeft:e}).show(),a.children("#title").children("div").toggle(),$jq(this).attr("title",d),$jq(this).children("#nav-min-icon").toggleClass("ui-icon-triangle-1-w").toggleClass("ui-icon-triangle-1-e")}),$jq("#content").delegate(".bench-update","click",function(){var a=$jq(this).attr("wbid"),b=$jq(this).attr("objclass"),c=$jq(this).attr("name"),d=$jq(this).attr("url"),f=$jq(this).attr("is_obj"),g=$jq(this).attr("href")+"?name="+escape(c)+"&class="+b+"&url="+d+"&is_obj="+f;return $jq("#bench-status").load(g,function(){e.ajaxGet($jq(".workbench-status-"+a),"/rest/workbench/star?wbid="+a+"&name="+escape(c)+"&class="+b+"&url="+d+"&is_obj="+f,1),$jq("#bench-status").addClass("highlight").delay(3e3).queue(function(){$jq(this).removeClass("highlight"),$jq(this).dequeue()}),b!="paper"&&e.ajaxGet($jq("div#reports-content"),"/rest/widget/me/reports",1),b=="paper"&&e.ajaxGet($jq("div#my_library-content"),"/rest/widget/me/my_library",1)}),!1}),$jq("#hide-empty-fields").click(function(){$jq(".disabled").toggle(),$jq(this).toggleClass("ui-state-highlight")})}function k(){if($jq("#widget-holder").size()==0)return;$jq("#widgets").find(".module-load, .module-close").click(function(){var a=$jq(this).attr("wname"),b=$jq("#nav-"+a),c="div#"+a+"-content";if(!b.hasClass("ui-selected")){if($jq(c).text().length<4){var d=".left",e=$jq("#widget-holder");if(Q(e)>=90)e.children(".right").children(".visible").height()&&(d=".right");else{var f=parseFloat(e.children(".left").css("height")),g=parseFloat(e.children(".right").css("height"));g<f&&(d=".right")}B(a,b,c,d)}else $jq(c).parents("li").addClass("visible"),b.addClass("ui-selected");I(a)}else b.removeClass("ui-selected"),$jq(c).parents("li").removeClass("visible");return P(),!1}),$jq("#widget-holder").find(".module-max").click(function(){var c=$jq(this).parents(".widget-container"),d=c.clone(),e=a.open("","test","height="+c.height()+",width="+c.width());e.document.write(b.head.innerHTML),e.document.write(d.html())}),$jq("#widgets").find(".module-load, .module-close").bind("open",function(){var a=$jq(this).attr("wname"),b=$jq("#nav-"+a),c="div#"+a+"-content";return B(a,b,c,".left"),!1}),$jq("#widget-holder").find(".module-min").click(function(){var a=$jq("#"+$jq(this).attr("wname")+"-content"),b=$jq(this);a.next().slideToggle("fast"),a.slideToggle("fast"),b.parent().toggleClass("minimized"),b.attr("show")!=1?(b.attr("show",1).attr("title","maximize"),b.removeClass("ui-icon-circle-triangle-s").removeClass("ui-icon-triangle-1-s"),b.addClass("ui-icon-circle-triangle-e")):(b.attr("show",0).attr("title","minimize"),b.removeClass("ui-icon-circle-triangle-e"),b.addClass("ui-icon-circle-triangle-s"))}),$jq("#widget-holder").find(".reload").click(function(){var a=$jq(this).attr("wname"),b=$jq("#nav-"+a),c=b.attr("href");e.ajaxGet($jq("div#"+a+"-content"),c)}),$jq(".feed").click(function(){var a=$jq(this).attr("rel"),b=$jq(this).parent().next("#widget-feed");b.filter(":hidden").empty().load(a),b.slideToggle("fast")})}function l(){function a(a,b){var c=a.height();c<40?(c="100%",a.prev(".ellipsis").add(a.prev().prev().prev(".author-list")).add(a.prev().prev().prev().prev().children(".paper-title")).removeClass("ellipsis")):(c="2.4em",a.prev(":not(.gene-link)").add(a.prev().prev().prev(".author-list")).add(a.prev().prev().prev().prev().children(".paper-title")).addClass("ellipsis")),a.css("max-height","none"),a.animate({height:c}),b.children(".ui-icon").toggleClass("ui-icon-triangle-1-s"),b.children(".ui-icon").toggleClass("ui-icon-triangle-1-n"),b.toggleClass("open")}$jq("#content").delegate(".toggle","click",function(){return $jq(this).toggleClass("active").next().slideToggle("fast"),!1}),$jq("#content").delegate(".tooltip","mouseover",function(){var a=$jq(this);bi(function(){a.cluetip({activation:"click",sticky:!0,cluetipClass:"jtip",dropShadow:!1,closePosition:"title",arrows:!0,hoverIntent:!1})})}),$jq("#content").delegate(".text-min","click",function(){a($jq(this),$jq(this).next())}),$jq("#content").delegate(".more","click",function(){a($jq(this).prev(),$jq(this))}),$jq("#content").delegate(".text-min","mouseover mouseout",function(){$jq(this).next().toggleClass("opaque")}),$jq("#content").delegate(".tip-simple","mouseover",function(){if(!$jq(this).children("div.tip-elem").show().children('span:not(".ui-icon")').text($jq(this).attr("tip")).size()){var a=$jq('<div class="tip-elem tip ui-corner-all" style="display:block"><span>'+$jq(this).attr("tip")+'</span><span class="tip-elem ui-icon ui-icon-triangle-1-s"></span></div>');a.appendTo($jq(this)).show()}}),$jq("#content").delegate(".tip-simple","mouseout",function(){$jq(this).children("div.tip-elem").hide()})}function n(a){m&&(clearTimeout(m),m=c);var b=$jq("#notifications");b.show().children("#notification-text").text(a),m=setTimeout(function(){b.fadeOut(400)},3e3)}function o(a,b){a=="show"?($jq(".system-message").show().css("display","block").animate({height:"20px"},"slow"),$jq("#notifications").css("top","20px"),U=20):($jq(".system-message").animate({height:"0px"},"slow",c,function(){$jq(this).hide()}),$jq.post("/rest/system_message/"+b),$jq("#notifications").css("top","0"))}function p(a){a.html('<div class="loading"><img src="/img/ajax-loader.gif" alt="Loading..." /></div>')}function q(a,b,c,d){$jq.ajax({url:b,beforeSend:function(){c||p(a)},success:function(b){a.html(b)},error:function(b,c,d){var e=$jq(b.responseText);a.html('<p class="error"><strong>Oops!</strong> Try that again in a few moments.</p>'),a.append(e.find(".error-message-technical").html())},complete:function(a,b){d&&d()}})}function r(){var a,b=!1;$jq("#operator-box").click(function(){var a=$jq(this);b||(q($jq("#operator-box"),"/rest/livechat",0,function(){$jq("#operator-box").hasClass("minimize")&&$jq("#operator-box").children().hide()}),b=!0),a.hasClass("minimize")?(a.removeClass("minimize"),a.animate({width:"9em"}),a.children().show()):(a.addClass("minimize"),a.animate({width:"1.5em"}),a.children().hide())}),$jq("#operator").click(function(){if($jq("#operator").attr("rel"))$jq.post("/rest/livechat?open=1",function(){d.href="/tools/operator"});else{var c=$jq("#operator-box");q(c,"/rest/livechat",0,function(){c.hasClass("minimize")&&c.children().hide()}),b=!0,c.hasClass("minimize")&&(c.removeClass("minimize"),c.animate({width:"9em"}),c.children().show()),a=setTimeout(function(){c.addClass("minimize"),c.animate({width:"1.5em"}),c.children().hide()},4e3)}})}function s(a){var b=$jq(a);b.attr("value")!=""&&b.siblings().fadeOut(),b.focus(function(){$jq(this).siblings().fadeOut()}),b.blur(function(){$jq(this).attr("value")==""&&$jq(this).siblings().fadeIn()})}function t(){var a=$jq("#Search"),b="search...",c=$jq("#searchForm"),e;a.focus(function(a){$jq(this).addClass("active")}),a.blur(function(a){$jq(this).removeClass("active")}),a.focus(function(){$jq(this).attr("value")==b&&$jq(this).attr("value","")}),a.blur(function(){$jq(this).attr("value")==""&&$jq(this).attr("value",b)}),$jq("#Search").autocomplete({source:function(a,b){e=$jq.getJSON("/search/autocomplete/"+u,a,function(a,c,d){d===e&&b(a)})},minLength:2,select:function(a,b){d.href=b.item.url}})}function v(a){a?u="all":a="Search";var b=$jq("#"+a).attr("value");if(b=="search..."||!b)b="*";b=encodeURIComponent(b),b=b.replace("%26","&"),b=b.replace("%2F","/"),d.href="/search/"+u+"/"+b}function w(a,b){if(!a||a=="home"||a=="me"||a=="bench")a="gene";u=a;if(a=="all")a="for anything";else{var c="for a";a.match(/^[aeiou]/)&&(c=c+"n"),a=c+" "+a.replace(/[_]/," ")}$jq("#current-search").text(a)}function x(a,b,c,d){function k(a){if(j.length==0)return;bh(function(){for(var b=0;b<j.length;b++)j[b]&&a.highlight(j[b])})}var e=decodeURI(a),f=1,g=0,h=$jq((d?"."+d+"-widget ":"")+"#count"),i=$jq((d?"."+d+"-widget ":"")+".load-results"),j=e?e.replace(/[,\.\*]/," ").split(" "):[];this.setTotal=function(a){g=a,h.html(g)},k($jq("div#results"+(d?"."+d+"-widget":""))),i.click(function(){var a=$jq(this).attr("href")+(f+1)+"?"+(c?"species="+c:"")+(d?"&widget="+d:"");div=$jq("<div></div>"),res=$jq((d?"."+d+"-widget":"")+" #load-results"),$jq(this).removeClass("load-results"),f++,p(div),res.html("loading..."),div.load(a,function(a,b,c){var d=g-f*10;d>0?(d>10&&(d=10),res.addClass("load-results"),res.html("load "+d+" more results")):res.remove(),k(div);if(b=="error"){var e="Sorry but there was an error: ";$jq(this).html(e+c.status+" "+c.statusText)}}),div.appendTo($jq(this).parent().children("ul")),S++})}function y(b){return $jq("#all-search-results").empty(),q($jq("#all-search-results"),b),S=0,$jq(a).scrollTop(0),$jq("#navigation").find(".ui-selected").removeClass("ui-selected"),!1}function z(a,b,c){var d="/search/"+a+"/"+c+"/?inline=1";T=0,$jq("#all-search-results").empty(),b&&(d=d+"&species="+b),q($jq("#all-search-results"),d),$jq("#search-count-summary").find(".count").each(function(){$jq(this).load($jq(this).attr("href"),function(){$jq(this).text()=="0"?$jq(this).parent().remove():$jq(this).parent().show()})})}function A(a,b,c){try{var d=_gat._createTracker("UA-16257183-1");d._trackEvent(b,c)}catch(e){}}function B(a,b,c,d){var c=$jq(c),e=b.attr("href");return c.closest("li").appendTo($jq("#widget-holder").children(d)),D(c.parent(".widget-container")),q(c,e),b.addClass("ui-selected"),c.parents("li").addClass("visible"),!1}function C(){var a=$jq("#navigation .module-load"),b=a.first();for(i=0;i<a.length;i++)$jq("#"+b.attr("wname")+".visible").length==0&&b.click(),b=b.next();return!1}function D(a){a.find("div.module-min").addClass("ui-icon-large ui-icon-triangle-1-s").attr("title","minimize"),a.find("div.module-close").addClass("ui-icon ui-icon-large ui-icon-close").hide(),a.find("div.module-max").addClass("ui-icon ui-icon-extlink").hide(),a.find("#widget-footer").hide(),a.find(".widget-header").children("h3").children("span.hide").hide(),a.find(".widget-header").hover(function(){$jq(this).children("h3").children("span").show()},function(){$jq(this).children("h3").children("span.hide").hide()}),a.hover(function(){$jq(this).find(".widget-header").children(".ui-icon").show(),$jq(this).find(".widget-header").children("h3").children(".module-min").attr("show")!=1&&$jq(this).find("#widget-footer").show()},function(){$jq(this).find(".widget-header").children(".ui-icon").hide(),$jq(this).find("#widget-footer").hide()}),a.find("div.module-min").hover(function(){$jq(this).attr("show")!=1?$jq(this).addClass("ui-icon-circle-triangle-s"):$jq(this).addClass("ui-icon-circle-triangle-e")},function(){$jq(this).removeClass("ui-icon-circle-triangle-s").removeClass("ui-icon-circle-triangle-e"),$jq(this).attr("show")!=1?$jq(this).addClass("ui-icon-triangle-1-s"):$jq(this).addClass("ui-icon-triangle-1-e")}),a.find("div.module-close").hover(function(){$jq(this).addClass("ui-icon-circle-close")},function(){$jq(this).removeClass("ui-icon-circle-close").addClass("ui-icon-close")})}function F(a,b,c){a>99?$jq("#widget-holder").children(".sortable").css("min-height","0"):$jq("#widget-holder").children(".sortable").css("min-height","5em"),$jq("#widget-holder").children(".left").css("width",a+"%"),b==0&&(b=100),$jq("#widget-holder").children(".right").css("width",b+"%"),c||P()}function G(a){var b=$jq("#widget-holder").attr("wclass");$jq.get("/rest/layout/"+b+"/"+a+"?delete=1"),$jq("div.columns ul div li#layout-"+a).remove()}function H(a){var b=$jq("#widget-holder").attr("wclass");$jq.get("/rest/layout/"+b+"/"+a,function(a){var b=a.childNodes[0].childNodes,c=b.length;for(i=0;i<c;i++){var e=b.item(i);e.nodeName=="data"&&(d.hash=e.attributes.getNamedItem("lstring").nodeValue)}},"xml")}function I(a){b.getElementById(a).scrollIntoView(!0)}function J(a){return P(a,function(){$jq(".list-layouts").load("/rest/layout_list/"+$jq(".list-layouts").attr("type"),function(a,b,c){if(b=="error"){var d="Sorry but there was an error: ";$jq(".list-layouts").html(d+c.status+" "+c.statusText)}})}),!1}function K(a,b,c){var e=$jq.map(a,function(a){return N(a)}),f=$jq.map(b,function(a){return N(a)}),g=e.join("")+"-"+f.join("")+"-"+c/10;return d.hash&&decodeURI(d.hash).match(/^[#](.*)$/)[1]!=g&&(E=!1),d.hash=g,g}function L(){if(E){var a=decodeURI(d.hash).match(/^[#](.*)$/)[1].split("-");if(!a)return;var b=a[0],c=a[1],e=a[2]*10;b&&(b=$jq.map(b.split(""),function(a){return O(a)})),c&&(c=$jq.map(c.split(""),function(a){return O(a)})),R(b,c,e)}else E=!0}function N(a){return M.list.indexOf(a).toString(36)}function O(a){return M.list[parseInt(a,36)]}function P(a,b){var c=$jq("#widget-holder"),d=c.attr("wclass"),e=c.children(".left").children(".visible").map(function(){return this.id}).get(),f=c.children(".right").children(".visible").map(function(){return this.id}).get(),g=Q(c),h=K(e,f,g),i="default";typeof a=="string"&&(i=escape(a)),$jq.post("/rest/layout/"+d+"/"+i,{lstring:h},function(){b&&b()})}function Q(a){var b=parseFloat(a.css("width")),c=parseFloat(a.children(".left").css("width"))/b*100;return Math.round(c)}function R(a,b,c){$jq("div#navigation").find(".ui-selected").removeClass("ui-selected"),$jq("#widget-holder").children().children("li").removeClass("visible"),F(c,100-c,1);for(var e=0;e<a.length;e++){var f=$jq.trim(a[e]);if(f.length>0){var g=$jq("#nav-"+f),h="div#"+f+"-content";B(f,g,h,".left")}}for(var e=0;e<b.length;e++){var f=$jq.trim(b[e]);if(f.length>0){var g=$jq("#nav-"+f),h="div#"+f+"-content";B(f,g,h,".right")}}d.hash.length>0&&P()}function V(a){var b=$jq(".comment-count");if(b.size()==0)return;b.load("/rest/feed/comment?count=1;url="+a);var c=$jq("<span></span>");c.load("/rest/feed/issue?count=1;url="+a,function(){c.html()!="0"&&$jq(".issue-count").html("!").css({color:"red"})})}function W(a,b,c,d,e){if(a.val()==""&&(!e||e.val()==""))return a.focus().addClass("ui-state-error"),!1;if(a.val()&&X(a.val(),"Not a valid email address!")==!1)return a.focus().addClass("ui-state-error"),!1;if(!c)return b&&b.val()==""?(b.focus().addClass("ui-state-error"),!1):!0;if(c.val()=="")return c.focus().addClass("ui-state-error"),!1;if(d&&c.val()!=d.val())return alert("The passwords do not match. Please enter again"),c.focus().addClass("ui-state-error"),!1}function X(a,b){var c=a.indexOf("@"),d=a.lastIndexOf(".");return c<1||d-c<2?(alert(b),!1):!0}function bf(a,d,e,f){var g=b.documentElement,h=b.createElement("script"),i=!1;be=!0,h.src=d;if(e){var j=b.createElement("link");j.href=e,j.rel="stylesheet",b.getElementsByTagName("head")[0].appendChild(j)}return h.onload=h.onreadystatechange=function(){!i&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")&&(i=!0,be=!1,bd[a]=!0,f(),h.onload=h.onreadystatechange=null,g&&h.parentNode&&g.removeChild(h))},g.insertBefore(h,g.firstChild),c}function bg(a){bl("dataTables","/js/jquery/plugins/dataTables/media/js/jquery.dataTables.min.js","/js/jquery/plugins/dataTables/media/css/demo_table.min.css",a);return}function bh(a){bl("highlight","/js/jquery/plugins/jquery.highlight-1.1.js",c,a);return}function bi(a){bl("cluetip","/js/jquery/plugins/cluetip-1.0.6/jquery.cluetip.min.js","/js/jquery/plugins/cluetip-1.0.6/jquery.cluetip.css",a);return}function bj(a){bl("markitup","/js/jquery/plugins/markitup/jquery.markitup.js","/js/jquery/plugins/markitup/skins/markitup/style.css",function(){bl("markitup-wiki","/js/jquery/plugins/markitup/sets/wiki/set.js","/js/jquery/plugins/markitup/sets/wiki/style.css",a)});return}function bk(a){bl("colorbox","/js/jquery/plugins/colorbox/colorbox/jquery.colorbox-min.js","/js/jquery/plugins/colorbox/colorbox/colorbox.css",a);return}function bl(a,b,c,d){if(!bd[a])bf(a,b,c,d);else{if(be){setTimeout(bl(a,b,c,d),1);return}d()}return}var g,m;$jq("#notifications").click(function(){m&&(clearTimeout(m),m=c),$jq(this).hide()});var u="all",E=!0,M=this.wl||function(){var a=this,b=$jq("#navigation"),c=b.find(".module-load").map(function(){return this.getAttribute("wname")}).get();return this.wl={list:c},this.wl}(),S=0,T=-45,U=0;$jq(function(){var b=$jq("#navigation"),c=$jq(a),d=0;c.scroll(function(){if(b.offset()){d||(d=b.offset().top);var a=b.parent().height()-b.outerHeight()-20;a<0&&(a=T);var e=b.outerHeight()<c.height();if(e)if(c.scrollTop()>d){var f=c.scrollTop()-d+T+U;f>a&&(f=a),b.stop().css("margin-top",f)}else b.stop().css("margin-top",T)}var g=$jq("#results.lazyload-widget");if(g.offset()&&S<3){var h=g.height()+g.offset().top,i=h-(c.height()+c.scrollTop());i<400&&g.children(".load-results").trigger("click")}})}),Array.indexOf||(Array.prototype.indexOf=function(a){for(var b=0;b<this.length;b++)if(this[b]==a)return b;return-1});var Y={init:function(a){Y.url=a.ref},submit:function(a){var b=a.closest("#comment-new"),c=b.find(".comment-content").val();if(c==""||c=="write a comment...")return alert("Please provide your name & comment"),!1;$jq.ajax({type:"POST",url:"/rest/feed/comment",data:{content:c,url:Y.url},success:function(a){n("Comment Submitted!"),b.find("#comment-box").prepend(a),b.find(".comment-content").val("write a comment..."),V(url)},error:function(a,b,c){alert(a+" "+b+" "+c)}});var d=$jq('<div class="comment-box"><a href="/me">'+name+"</a> "+c+'<br /><span id="fade">just now</span></div>'),e=$jq("#comments");return e.prepend(d),!1},cmDelete:function(a){var b=a.attr("id"),c=a.attr("rel");$jq.ajax({type:"POST",url:c,data:{method:"delete",id:b},success:function(a){V(c)},error:function(a,b,c){alert(a+" "+b+" "+c)}}),a.parent().remove()}},Z={init:function(a){Z.url=a.ref},submit:function(a){var b=a.attr("rel"),c=a.attr("url"),d=a.attr("page"),e=a.closest("#issues-new"),f=e.find("#email"),g=e.find("#display-name"),h=e.find("#isprivate:checked").size();return f.attr("id")&&g.attr("id")&&W(f,g)==!1?!1:($jq.ajax({type:"POST",url:b,data:{title:e.find("#title").val(),content:e.find("#content").val(),email:f.val(),username:g.val(),url:Z.url,isprivate:h},success:function(a){a==0?alert("The email address has already been registered! Please sign in."):(n("Problem Submitted! We will be in touch soon."),e.closest("#widget-feed").hide(),V(c))},error:function(a,b,c){alert(a+" "+b+" "+c)}}),!1)},isDelete:function(b){var c=b.attr("rel"),d=new Array;$jq(".issue-deletebox").filter(":checked").each(function(){d.push($jq(this).attr("name"))});var e=confirm("Do you really want to delete these issues: #"+d.join(" #"));e&&$jq.ajax({type:"POST",url:c,data:{method:"delete",issues:d.join("_")},success:function(b){a.location.reload(1),V(c)},error:function(a,b,c){alert(a+" "+b+" "+c)}})}},$={update:function(a,b){a||(a="0");var c=$jq("li#static-widget-"+a),d=c.find("input#widget_title").val(),e=c.find("input#widget-order").val(),f=c.find("textarea#widget_content").val();$jq.ajax({type:"POST",url:"/rest/widget/static/"+a,dataType:"json",data:{widget_title:d,path:b,widget_content:f,widget_order:e},success:function(b){$.reload(a,0,b.widget_id)},error:function(a,b,c){alert(a+" "+b+" "+c)}})},edit:function(a,b){var c=a.split("-").pop(),d=$jq("#"+a+"-content"),e=d.parent(),f=e.find("a#edit-button");f.hasClass("ui-state-highlight")?$.reload(c):(f.addClass("ui-state-highlight"),d.load("/rest/widget/static/"+c+"?edit=1"))},reload:function(a,b,c){var d=$jq("#static-widget-"+a+"-content"),e=d.parent(),f=e.find("h3 span.widget-title input"),g="/rest/widget/static/"+(c||a);f.size()>0&&f.parent().html(f.val()),e.find("a.button").removeClass("ui-state-highlight"),$jq("#nav-static-widget-"+a).text(f.val()),b&&(g=g+"?rev="+b),d.load(g)},delete_widget:function(a){confirm("are you sure you want to delete this widget?")&&$jq.ajax({type:"POST",url:"/rest/widget/static/"+a+"?delete=1",success:function(b){$jq("#nav-static-widget-"+a).click().hide()},error:function(a,b,c){alert(a+" "+b+" "+c)}})},history:function(a){var b=$jq("#"+a),c=b.find("div#"+a+"-history");if(c.size()>0)c.toggle(),b.find("a#history-button").toggleClass("ui-state-highlight");else{var d=a.split("-").pop(),c=$jq('<div id="'+a+'-history"></div>');c.load("rest/widget/static/"+d+"?history=1"),b.find("div.content").append(c),b.find("a#history-button").addClass("ui-state-highlight")}}},_={init:function(){this.bc=$jq("#breadcrumbs");if(!this.bc)return;this.children=this.bc.children(),this.bCount=this.children.size();if(this.bCount<3)return;this.exp=!1,this.bc.empty();var a=this.children.slice(0,this.bCount-2),b=this.children.slice(this.bCount-2);this.hiddenContainer=$jq('<span id="breadcrumbs-hide"></span>'),this.hiddenContainer.append(a).children().after(" &raquo; "),this.bc.append('<span id="breadcrumbs-expand" class="tip-simple ui-icon-large ui-icon-triangle-1-e " tip="exapand"></span>').append(this.hiddenContainer).append(b),this.bc.children(":last").before(" &raquo; "),this.expand=$jq("#breadcrumbs-expand"),this.expand.click(function(){_.exp?_.show():_.hide()}),this.width=this.hiddenContainer.width(),this.hide()},show:function(){_.hiddenContainer.animate({width:_.width},function(){_.hiddenContainer.css("width","auto")}).css("visibility","visible"),_.expand.attr("tip","minimize"),_.expand.removeClass("ui-icon-triangle-1-e").addClass("ui-icon-triangle-1-w"),_.exp=!1},hide:function(){_.hiddenContainer.animate({width:0},function(){_.hiddenContainer.css("visibility","hidden")}),_.expand.attr("tip","expand"),_.expand.removeClass("ui-icon-triangle-1-w").addClass("ui-icon-triangle-1-e"),_.exp=!0}},ba={google:{name:"Google",url:"https://www.google.com/accounts/o8/id"},facebook:{name:"Facebook",url:"http://facebook.anyopenid.com/"}},bb=$jq.extend({},ba),bc={signin:function(a,b){var c=bb[a];if(!c)return;var e="/auth/popup?id="+a+"&url="+c.url+"&redirect="+d;this.popupWin(e)},popupWin:function(b){var c=400,d=600,e=screen.width/2-d/2,f=screen.height/2-c/2,g=a.open(b,"popup","status=no,resizable=yes,height="+c+",width="+d+",left="+e+",top="+f+",toolbar=no,menubar=no,scrollbars=no,location=no,directories=no");g.focus()}},bd=new Array,be=!1;return{init:f,displayNotification:n,ajaxGet:q,hideTextOnFocus:s,goToAnchor:I,systemMessage:o,Breadcrumbs:_,setLoading:p,SearchResult:x,resetLayout:R,deleteLayout:G,columns:F,setLayout:H,search:v,search_change:w,loadResults:y,openid:bc,StaticWidgets:$,recordOutboundLink:A,comment:Y,issue:Z,getDataTables:bg,getMarkItUp:bj,getColorbox:bk}}();$jq(b).ready(function(){$jq.ajaxSetup({timeout:99999}),e.init()}),a.WB=e}(this,document)