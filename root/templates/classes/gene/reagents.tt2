[% # This generic statement belongs at the start of every template %]
[% PROCESS identify_templates(my_component=component.name) IF c.config.debug_view %]

[% 

   # Antibodies
   build_data_table(order=['antibody','summary','laboratory'],
                    columns={ antibody     => 'Antibody',
	   	              summary      => 'Summary',
		              laboratory   => 'Laboratory',
                            },
                     key='antibodies',
                     title='Antibodies');


   # Transgenes
   t = pluralize("Drives Transgene", fields.transgenes.data.size);
   build_data_table(order=['transgene','summary','laboratory'],
                    columns={ transgene    => 'Transgene',
	   	              summary      => 'Summary',
		              laboratory   => 'Laboratory',
                             },
                    key='transgenes',
                    title="$t");

   # Drive by transgene
   t = pluralize("Expressed in Transgene", fields.transgene_products.data.size);
   build_data_table(order=['transgene','summary','laboratory'],
                    columns={ transgene    => 'Transgene',
	   	              summary      => 'Summary',
		              laboratory   => 'Laboratory',
                            },
                     key='transgene_products',
                     title="$t");




    # Matching cDNAs
    WRAPPER $field_block title="Matching cDNAs" key="matching_cdnas";
       'Found ' _ searchlink('sequence', object.name.data.id, fields.matching_cdnas.data.size _ " matching cDNAs");
       '<span id="fade">TODO: check if sequence search working</span>';
    END;

    WRAPPER $field_block title="Primer pairs" key="primer_pairs";
       'Found ' _ searchlink('pcr_product', object.name.data.id, fields.primer_pairs.data.size _ " primer pairs");
       '<span id="fade">TODO: implement primer pair search</span>';
    END;

    WRAPPER $field_block title="ORFeome Primers" key="orfeome_primers";
         FOREACH item IN fields.orfeome_primers.data;
             tag2link(item);
             '<br />';
        END;
    END;

    WRAPPER $field_block title="SAGE tags" key="sage_tags";
       'Found ' _ searchlink('sage_tag', object.name.data.id, fields.sage_tags.data.size _ " SAGE tags");
       '<span id="fade">TODO: implement SAGE tag search</span>';
    END;

    WRAPPER $field_block title="Microarray probes" key="microarray_probes";
        FOREACH item IN fields.microarray_probes.data;
           tag2link(item);
           '<br />';
        END;
    END;

%]