[GENERAL]
description   = nGASP WS160 Training Region Browser
db_adaptor    = Bio::DB::SeqFeature::Store
db_args       = -adaptor DBI::mysql
                -dsn     WS160_lite

# aggregators = processed_transcript match
plugins     = GFFDumper FastaDumper BatchDumper

quicklink plugins = GFFDumper FastaDumper

# list of tracks to turn on by default
default features = Genes LOCI:overview CDNA

# The class of the objects used to establish the reference coordinates.
reference class  = 

# examples to show in the introduction
examples = I F53G12 C01A2.3

search_instructions = <p>Select a blue (test) or red (training) region on the left to browse nGASP regions</p>

search attributes = Note

# "automatic" classes to try when an unqualified identifier is given
automatic classes = CDS

#image_padding = 60
pad_left   = 25
pad_right  = 25

# remote GFF files to make available for optional loading
remote sources = "ORFeome STSs"      http://localhost/elegans_sts.gff
                 "Expression probes" http://localhost/elegans_expression.gff

# DAS reference server
das mapmaster = SELF

# a footer
footer = <hr>
        <table width="100%">
        <TR>
        <TD align="LEFT" class="databody">
        For the source code for this browser, see the <a href="http://www.gmod.org">
        Generic Model Organism Database Project.</a>  For other questions, send
        mail to <a href="mailto:lstein@cshl.org">lstein@cshl.org</a>.
        </TD>
        </TR>
        </table>
        <hr>
        <pre>$Id: nGASP.conf,v 1.2 2007/02/01 02:26:11 smckay Exp $</pre>

# Various places where you can insert your own HTML -- see configuration docs
html1 = 
html2 = 
html3 = 
html4 = 
html5 = 
html6 = 

# what image widths to offer
image widths  = 450 500 640

# default width of detailed view (pixels)
default width = 500

# Web site configuration info
stylesheet  = /stylesheets/wormbase.css
buttons     = /gbrowse/images/buttons
tmpimages   = /ace_images/gbrowse

# max and default segment sizes for detailed view
max segment     = 5000000
default segment = 5000

# zoom levels
zoom levels    = 100 200 1000 2000 5000 10000 20000 50000 100000 200000 5000000 1000000

# colors of the overview, detailed map and key
overview bgcolor = lightgrey
detailed bgcolor = lightgoldenrodyellow
key bgcolor      = beige

########################
# Default glyph settings
########################

[TRACK DEFAULTS]
glyph         = generic
height        = 10
bgcolor       = lightgrey
fgcolor       = black
font2color    = blue
label density = 100
bump density  = 500
# where to link to when user clicks in detailed view
link          = AUTO

# what to show in the overview section
[LOCI:overview]
feature       = gene:landmark
label         = 1
glyph         = generic
bgcolor       = lavender
key           = Landmarks
height        = 5

################## TRACK CONFIGURATION ####################
# the remainder of the sections configure individual tracks
###########################################################
[Genes]
feature      = gene:Coding_transcript
glyph        = gene
category     = Genes
height       = 12
bgcolor      = blue
label        = sub {
		my $f = shift;
		my $dn = $f->display_name;
		my @aliases = $f->each_tag_value('Alias');
		foreach (@aliases) {
		   return "$dn ($_)" if /^\w+-\d+/;
		}
		return $dn;
	}
description  = sub {
	my $f = shift;
	my @subf = $f->get_SeqFeatures('mRNA');
	my $note;
	for my $sf (@subf) {
	   $note ||= join '; ',$sf->each_tag_value('Note');
	}
        $note;
  }
link         = http://www.wormbase.org/db/get?name=$name;class=Gene
label_transcripts =  1
das category = transcription
key          = Genes

[Genes:150000]
glyph        = generic
bump         = 0
maxdepth     = 1
stranded     = 1
label        = 0
description  = 0

[Transcripts:100000]
feature      = mRNA
glyph        = box
stranded     = 1

[Transcripts]
feature      = mRNA:Coding_transcript
category     = Genes
glyph        = cds
height       = 12
bgcolor      = blue
ignore_empty_phase = 1
das category = transcription
key          = Transcripts

######################## ALIGNMENTS ####################

[ESTB:50001]
# turn off grouping!
group_pattern = 
glyph = generic

[ESTB:200]
label_position = top

[ESTB]
feature      = EST_match:BLAT_EST_BEST
category     = Alignments
height       = 7
draw_target  = 1
label_position = left
realign      = 1
glyph        = segments
bgcolor      = sub {
                my $feature = shift;
                my $name    = $feature->display_name;
                if ($name =~ /\.5$/) {
                   return 'red';
                } else {
                   return 'orange';
                }
        }
group_pattern = /\.[53]$/
key = ESTs aligned by BLAT

[CDNA]
feature      = cDNA_match:BLAT_mRNA_BEST
category     = Alignments
height       = 7
draw_target  = 1
glyph        = segments
bgcolor      = orange
key = Full length cDNAs aligned by BLAT

[CDNA:150000]
glyph = generic
bump  = 0
label = 0

[BLASTX:150000]
glyph = generic
bump = 0
label = 0

[BLASTX:300]
label_position = top

[BLASTX]
feature       = protein_match:wublastx
glyph	      = segments
draw_protein_target   = 1
bgcolor       = sub { $_[0]->strand < 0 ? 'yellow' : 'orange'}
fgcolor       = black
category      = Alignments
height        = 4
label_position = left
key           = Proteins aligned by BLASTX
link          = sub {
  		  my $feature = shift;
	          my $name = $feature->name;
		  if ($name =~ s/^TR://) {
	             return sprintf("http://srs.ebi.ac.uk/srs6bin/cgi-bin/wgetz?-e+[SWALL-acc:%s]+-vn+2",$name);
		  } elsif ($name =~ s/^SW://) {
	             return sprintf("http://srs.ebi.ac.uk/srs6bin/cgi-bin/wgetz?-id+3LIc21HeBHW+-e+[SWALL:'%s']",$name);
                  } elsif ($name =~ s/ENSEMBL://) {
                     return sprintf('http://www.ensembl.org/Homo_sapiens/protview?peptide=%s',$name);
                  } elsif ($name =~ s/GADFLY://) {
                     return sprintf('http://hedgehog.lbl.gov:8002/cgi-bin/annot/query?namesearch=%s',$name);
                  } elsif ($name =~ s/SGD://) {
                     return sprintf('http://genome-www4.stanford.edu/cgi-bin/SGD/locus.pl?locus=%s',$name);
                  } elsif ($name =~ s/PS://) {
                     return sprintf('http://www.expasy.ch/cgi-bin/prosite-search-de?%s',$name);
	          } else {
                     return "/db/get?name=$name;class=Protein";
	          }
                }
citation =  These are WUBLASTX (nucleotide to protein, via six-frame
	translation) similarity hits, run biweekly against reference protein
	datasets from the genomes of yeast, fly, worm, and human and also
	against a reduced subset of SwissProt and TREMBL.  Blue-colored hits
	indicate similarity hits against C. briggsae predicted proteins.


[TranslationF]
glyph        = translation
global feature = 1
height       = 20
fgcolor      = purple
start_codons = 0
strand       = +1
arrow_height = 2
translation  = 3frame
category     = Sequence
key          = 3-frame translation (forward)
citation     = This track shows the position of stop codons at low magnifications,
	and the 3-frame translation at high magnifications.  Only the forward strand
	is shown.

[DNA/GC Content]
glyph          = dna
global feature = 1
strand         = both
gc_window      = auto
height         = 40
fgcolor        = red
key            = GC Content
category       = Sequence

[TranslationR]
glyph        = translation
global feature = 1
height       = 20
fgcolor      = blue
strand       = -1
start_codons = 0
arrow_height = 2
translation  = 3frame
category     = Sequence
key          = 3-frame translation (reverse)
citation     = This track shows the position of stop codons at low magnifications,
	and the 3-frame translation at high magnifications.  Only the reverse
	strand is shown.
