[GENERAL]

# wormbases-specific mod.  Turn off autocomplete
head = <script>var doAutocomplete;</script>


description = C. remanei (preliminary analysis)
#pcap assembly: accession AAGD01000000)
adaptor     = dbi::mysqlopt
database    = dbi:mysql:database=remanei;host=localhost
aggregators = wormbase_cds{coding_exon/CDS} clone alignment waba_alignment_briggsae 
              waba_alignment_elegans coding{coding_exon} blastz_alignment_elegans
              blastz_alignment_briggsae

user        = nobody
passwd      =

# Installed plugins
plugins = Aligner
	  FastaDumper 
          OligoFinder 
	  GFFDumper GeneFinder
	  BatchDumper Genscan

# Web site configuration info
stylesheet  = /gbrowse/briggsae.css
buttons     = /gbrowse/images/buttons
tmpimages   = sub {
		my ($server) = $ENV{SERVER_NAME} =~ /(.*?)\..*/;
	  	$server    ||= 'local';
  		return "/ace_images/gbrowse/$server","/var/tmp/ace_images/gbrowse";
	}

# Default glyph settings
glyph       = generic
height      = 8
bgcolor     = cyan
fgcolor     = black
label density = 25
bump density  = 100
keystyle = between
empty_tracks = key

landmark features = supercontig region:Genomic_canonical region:link

header = sub {
	require ElegansSubs;
	require CGI;
        use constant DASVIEW => '/db/searches/dasview';
	$Ace::Browser::AceSubs::TOP = 0;
	my $result = ElegansSubs::Banner().
	             CGI::h1('C. remanei (preliminary analysis)');
#	sub score_height { 
#				my $feature = shift;
#				my $score = $feature->score;
#				my $log_score = $score <= 0 ? 0 : log $score;
#				my $height    =  $log_score * 5;
#				return $height < 8  ? 8 
#			             : $height > 20 ? 20
#			             : $height;
#			}
	$result;
	}

footer = sub {
	print '
	<hr>
	<table width="100%">
	<TR>
	<TD align="LEFT" class="databody">
	Data compiled by Todd Harris (<a href="mailto:harris@cshl.edu">harris@cshl.edu</a>), 8/2005.
	</TD>
	</TR>
	</table>';
	ElegansSubs::ElegansSearchBar();
	print ElegansSubs::Footer();
	return;
	}

# where to link to when user clicks in detailed view
link           = gbrowse/remanei/?name=$name

# what image widths to offer
image widths  = 450 640 800 960 1024 1280

# default width of detailed view (pixels)
default width = 800
default features = WU_MERGED "CDS WU_MERGED" WABA Component

# max and default segment sizes for detailed view
max segment = 1000000
default segment = 50000

# low-res boundary
low res = 200000

# standard zoom levels to be offered to user
zoom levels    = 100 500 1000 5000 10000 20000 40000 100000 200000 500000 1000000

# fine zoom to be offered -- please provide a percentage
fine zoom      = 20%

# canonical features to show in overview
overview bgcolor = turquoise

# examples to show in the introduction
examples = Supercontig0
	   cr01.sctg0.wum.2.1
	   cr01.sctg998.fgp1
	   
# "automatic" classes to try when an unqualified identifier is given
automatic classes = Component CDS

# List of remote annotation sources: format is URL/name pairs separated by
# white space.  Please use quotation marks to prevent internal spaces from
# being interpreted.
# remote sources = 

##################################################################################
# the remainder of the sections configure particular tracks to show
##################################################################################

###################################
# Gene Models
###################################
[WU_MERGED]
feature      = wormbase_cds:WU_MERGED
key          = WashU merged gene set
glyph        = wormbase_transcript
category     = Gene Models
#bgcolor      = yellow
#		my $feature = shift;
#		return 'blue'      if defined $feature->attributes('Supported_by_ortholog');
#		return 'lightblue' if defined $feature->attributes('Supported_by_paralogs');
#		return 'yellow'    if defined $feature->attributes('Supported_by_multiple_predictions');
#		return 'white';
#	}
fgcolor      = black
font2color   = blue
forwardcolor = violet
reversecolor = turquoise
#height       = 10
description  = sub { my @notes = shift->notes; join '; ',@notes }
#link         = /db/gene/gene?name=$name
title        = WashU merged set gene $name
link         = sub {
	my $f = shift;
	my $name = $f->name;
	return "/db/gene/gene?name=$name";
	}
citation     = A "merged gene set" of the best gene model at each locus 
               provided by WashU.  The gene merging process chooses the best Eannot 
               gene model from all Eannot predictions.  That model is then compared to 
               all other models generated by each prediction programs and the best is 
               picked.  The selection process in both cases is a heirarchical selection 
               scheme that looks at the number of intron splice sites supported by 
               EST/mRNA data, the number of intron splice sites supported by each 
               prediction, ORF length, and the highest BLASTP score against Wormpep and 
               Brigpep.  Each of the remaining genes is then compared against the 
               representative model and picked as an alternative form if any exonic 
               sequence in the potential isoform that lies in an intron of the 
               representative form is supported by EST/mRNA data at greater than 50%.  
               As a first step in each case, non-coding eannot genes that overlap the  
               first or last exon of a coding gene are used to extend that CDS if a 
               longer ORF can be found.

[WU_MERGED:120000]
feature      = CDS:hybrid
glyph        = generic
bgcolor     = sub {shift->strand>0?'violet':'turquoise'}
#bgcolor      = sub {
#		my $feature = shift;
#		return 'blue'      if defined $feature->attributes('Supported_by_ortholog');
#		return 'lightblue' if defined $feature->attributes('Supported_by_paralogs');
#		return 'yellow'    if defined $feature->attributes('Supported_by_multiple_predictions');
#		return 'white';
#	}
height      = 12
strand_arrow = 1

[CDS WU_MERGED]
feature      = coding:WU_MERGED
key          = WashU merged gene set frame usage
glyph        = cds
category    =  Gene Models
frame0f      = cadetblue
frame1f      = blue
frame2f      = darkblue
frame0r      = darkred
frame1r      = red
frame2r      = crimson
description  = 0
height       = 13
label        = sub { "Frame usage for ".shift->name }
citation     = This track shows CDS reading frames.  At low magnifications, each transcript
	       is shown as a "staff" of three lines.  Each line indicates a reading frame.  At 
               high magnifications, the protein translation is shown.

#[EN]
#feature      = wormbase_cds:ENSEMBL
#glyph        = wormbase_transcript
#bgcolor      = wheat
#fgcolor      = black
#forwardcolor = violet
#reversecolor = turquoise
#font2color   = blue
#height       = 10
#description  = 1
#title        = ENSEMBL gene $name
#key          = ENSEMBL genes
#citation     = These are genes that have been predicted by the EnsEMBL pipeline
#	using GeneWise, EST and mRNA alignments.
#
#[EN:75000]
#feature      = CDS:ENSEMBL
#glyph       = generic
#bgcolor     = sub {shift->strand>0?'violet':'turquoise'}
#height      = 12
#strand_arrow = 1
#
#[CDS ENS]
#feature      = coding:ENSEMBL
#glyph        = cds
#frame0f      = cadetblue
#frame1f      = blue
#frame2f      = darkblue
#frame0r      = darkred
#frame1r      = red
#frame2r      = crimson
#description  = 0
#height       = 13
#abel         = sub { "Frame usage for ".shift->name }
#key          = ENSEMBL frame usage
#citation     = This track shows CDS reading frames.  At low magnifications, each transcript
#	is shown as a "staff" of three lines.  Each line indicates a reading frame.  At high
#	magnifications, the protein translation is shown.

[AUGUSTUS]
feature      = wormbase_cds:AUGUSTUS_ele
key          = Augustus genes
glyph        = wormbase_transcript
category     = Gene Models
bgcolor      = blue
fgcolor      = black   
forwardcolor = red
reversecolor = firebrick
font2color   = blue
#pad_top      = sub {
#               return unless $_[4]->level > 0;
#               return (20-score_height(@_));
#       }
#height       = sub { score_height(@_); }
description  = 1
title        = Augustus gene $name  
citation     = These are ab initio gene predictions generated by AUGUSTUS trained on C. elegans gene models.
               Analysis provided by Jason Staijich.

[AUGUSTUS:75000]
feature      = CDS:AUGUSTUS_ele
glyph       = generic
bgcolor     = sub {shift->strand>0?'red':'firebrick'}
height      = 12   
strand_arrow = 1

[CDS AUGUSTUS]
feature      = coding:AUGUSTUS_ELE
key          = Augustus frame usage
category    =  Gene Models
glyph        = cds
frame0f      = cadetblue
frame1f      = blue
frame2f      = darkblue
frame0r      = darkred
frame1r      = red
frame2r      = crimson
description  = 0
height       = 13    
label        = sub { "Frame usage for ".shift->name }
citation     = This track shows CDS reading frames.  At low magnifications, each transcript
        is shown as a "staff" of three lines.  Each line indicates a reading frame.  At high
        magnifications, the protein translation is shown. 

[EXONERATE]
feature      = wormbase_cds:EXONERATE
key          = Exonerate genes
glyph        = wormbase_transcript
category     = Gene Models
bgcolor      = blue
fgcolor      = black
forwardcolor = red
reversecolor = firebrick
font2color   = blue
#pad_top      = sub {
#               return unless $_[4]->level > 0;
#               return (20-score_height(@_));
#       }
#height       = sub { score_height(@_); }
description  = 1
title        = Exonerate gene $name
citation     = Evidence-based gene models generated by EXONERATE using C. elegans protein alignments.
               Analysis provided by Jack Chen. 

[EXONERATE:75000]
feature      = CDS:EXONERATE
glyph       = generic
bgcolor     = sub {shift->strand>0?'red':'firebrick'}
height      = 12   
strand_arrow = 1

[CDS EXONERATE]
feature      = coding:EXONERATE
key          = Exonerate frame usage
category    =  Gene Models
glyph        = cds
frame0f      = cadetblue
frame1f      = blue
frame2f      = darkblue
frame0r      = darkred
frame1r      = red
frame2r      = crimson
description  = 0
height       = 13    
label        = sub { "Frame usage for ".shift->name }
citation     = This track shows CDS reading frames.  At low magnifications, each transcript
        is shown as a "staff" of three lines.  Each line indicates a reading frame.  At high
        magnifications, the protein translation is shown. 

[EANNOT]
feature      = wormbase_cds:EANNOT
key          = Eannot genes
glyph        = wormbase_transcript
category     = Gene Models
bgcolor      = blue
fgcolor      = black
forwardcolor = red
reversecolor = firebrick
font2color   = blue
#pad_top      = sub {
#		return unless $_[4]->level > 0;
#		return (20-score_height(@_));
#	}
#height       = sub { score_height(@_); }
description  = 1
title        = Eannot gene $name
citation     = Evidence-based gene models predicted by EANNOT using on nematoda mRNA, EST,
               and protein alignments.  Analysis provided by WashU.

[EANNOT:75000]
feature      = CDS:EANNOT
glyph       = generic
bgcolor     = sub {shift->strand>0?'red':'firebrick'}
height      = 12
strand_arrow = 1

[CDS EANNOT]
feature      = coding:EANNOT
key          = Eannot frame usage
category    =  Gene Models
glyph        = cds
frame0f      = cadetblue
frame1f      = blue
frame2f      = darkblue
frame0r      = darkred
frame1r      = red
frame2r      = crimson
description  = 0
height       = 13
label        = sub { "Frame usage for ".shift->name }
citation     = This track shows CDS reading frames.  At low magnifications, each transcript
	is shown as a "staff" of three lines.  Each line indicates a reading frame.  At high
	magnifications, the protein translation is shown.

[FGENESH]
feature      = wormbase_cds:FGENESH
key          = FGenesH genes
glyph        = wormbase_transcript
category     = Gene Models
bgcolor      = blue
fgcolor      = black
forwardcolor = red
reversecolor = firebrick
font2color   = blue
#pad_top      = sub {
#		return unless $_[4]->level > 0;
#		return (20-score_height(@_));
#	}
#height       = sub { score_height(@_); }
description  = 1
title        = FGenesH gene $name
citation     = These are ab initio gene predictions generated by FGenesH using C. elegans parameter files. 
               Analysis provided by WashU.

[FGENESH:75000]
feature      = CDS:FGENESH
glyph       = generic
bgcolor     = sub {shift->strand>0?'red':'firebrick'}
height      = 12
strand_arrow = 1

[CDS FGENESH]
feature      = coding:FGENESH
key          = FGenesH frame usage
category    =  Gene Models
glyph        = cds
frame0f      = cadetblue
frame1f      = blue
frame2f      = darkblue
frame0r      = darkred
frame1r      = red
frame2r      = crimson
description  = 0
height       = 13
label        = sub { "Frame usage for ".shift->name }
citation     = This track shows CDS reading frames.  At low magnifications, each transcript
	is shown as a "staff" of three lines.  Each line indicates a reading frame.  At high
	magnifications, the protein translation is shown.

[FGENESH_PLUS]
feature      = wormbase_cds:FGENESH_PLUS
glyph        = wormbase_transcript
category     = Gene Models
bgcolor      = wheat
fgcolor      = black
forwardcolor = #FF66FF
reversecolor = #FF33FF
font2color   = blue
#pad_top      = sub {
#		return unless $_[4]->level > 0;
#		return (20-score_height(@_));
#	}
#height       = sub { score_height(@_); }
description  = 1
title        = FGenesH+ gene $name
key          = FGenesH+ genes
citation     = Evidence-based gene models generated by FGenesH+ using C. elegans parameter files
               and C. elegans protein alignments. Analysis provided 
               by WashU.

[FGENESH_PLUS:75000]
feature      = CDS:FGENESH_PLUS
glyph       = generic
bgcolor     = sub {shift->strand>0?'#FF66FF':'#FF33FF'}
height      = 12
strand_arrow = 1

[CDS FGENESH_PLUS]
feature      = coding:FGENESH_PLUS
category    =  Gene Models
glyph        = cds
frame0f      = cadetblue
frame1f      = blue
frame2f      = darkblue
frame0r      = darkred
frame1r      = red
frame2r      = crimson
description  = 0
height       = 13
label        = sub { "Frame usage for ".shift->name }
key          = FGenesH-Plus frame usage
citation     = This track shows CDS reading frames.  At low magnifications, each transcript
	is shown as a "staff" of three lines.  Each line indicates a reading frame.  At high
	magnifications, the protein translation is shown.

[GENEFINDER]
feature      = wormbase_cds:GENEFINDER
glyph        = wormbase_transcript
category     = Gene Models
bgcolor      = darkblue
fgcolor      = black
forwardcolor = orange
reversecolor = darkorange
font2color   = blue
height       = 10
description  = 1
title        = Genefinder gene $name
key          = Genefinder genes
citation     = These are ab initio gene predictions generated by Genefinder using C. elegans tables. Analysis 
               provided by WashU.

[GENEFINDER:75000]
feature      = CDS:GENEFINDER
glyph       = generic
bgcolor     = sub {shift->strand>0?'orange':'darkorange'}
height      = 12
strand_arrow = 1

[CDS GENEFINDER]
feature      = coding:GENEFINDER
category    =  Gene Models
glyph        = cds
frame0f      = cadetblue
frame1f      = blue
frame2f      = darkblue
frame0r      = darkred
frame1r      = red
frame2r      = crimson
description  = 0
height       = 13
label        = sub { "Frame usage for ".shift->name }
key          = Genefinder frame usage
citation     = This track shows CDS reading frames.  At low magnifications, each transcript
	is shown as a "staff" of three lines.  Each line indicates a reading frame.  At high
	magnifications, the protein translation is shown.


[GENSCAN]
feature      = wormbase_cds:GENSCAN
category     = Gene Models
glyph        = wormbase_transcript
bgcolor      = green
fgcolor      = black
forwardcolor = #9966FF
reversecolor = #6600CC
font2color   = blue
#pad_top      = sub {
#		return unless $_[4]->level > 0;
#		return (20-score_height(@_));
#	}
#height       = sub { score_height(@_)	}
description  = 1
title        = Genscan gene $name
key          = Genscan genes
citation     = These are ab initio gene model predictions generated by GenScan. Analysis provided by WashU.

[GENSCAN:75000]
feature      = CDS:GENSCAN
glyph        = generic
bgcolor      = sub {shift->strand>0?'#9966FF':'#6600CC'}
height       = 12
strand_arrow = 1

[CDS GENSCAN]
feature      = coding:GENSCAN
category    =  Gene Models
glyph        = cds
frame0f      = cadetblue
frame1f      = blue
frame2f      = darkblue
frame0r      = darkred
frame1r      = red
frame2r      = crimson
description  = 0
height       = 13
label        = sub { "Frame usage for ".shift->name }
key          = Genscan frame usage
citation     = This track shows CDS reading frames.  At low magnifications, each transcript
	is shown as a "staff" of three lines.  Each line indicates a reading frame.  At high
	magnifications, the protein translation is shown.

[GENEWISE_WASHU]
feature      = wormbase_cds:GENEWISE
category     = Gene Models
glyph        = wormbase_transcript
bgcolor      = wheat
fgcolor      = black
forwardcolor = #999933
reversecolor = #666600
font2color   = blue
#pad_top      = sub {
#		return unless $_[4]->level > 0;
#		return (20-score_height(@_));
#	}
#height       = sub { score_height(@_)	}
description  = 1
title        = Genewise gene $name
key          = Genewise genes (KHP)
citation     = Evidence-based gene models generated by Genewise using nematoda protein alignments.
               Analysis provided by WashU.

[GENEWISE_WASHU:75000]
feature      = CDS:GENEWISE
glyph        = generic
bgcolor      = sub {shift->strand>0?'#999933':'#666600'}
height       = 12
strand_arrow = 1

[CDS GENEWISE_WASHU]
feature      = coding:GENEWISE
category    =  Gene Models
glyph        = cds
frame0f      = cadetblue
frame1f      = blue
frame2f      = darkblue
frame0r      = darkred
frame1r      = red
frame2r      = crimson
description  = 0
height       = 13
label        = sub { "Frame usage for ".shift->name }
key          = Genewise frame usage (KHP)
citation     = This track shows CDS reading frames.  At low magnifications, each transcript
	is shown as a "staff" of three lines.  Each line indicates a reading frame.  At high
	magnifications, the protein translation is shown.


[GENEWISE_JC]
feature      = wormbase_cds:GENEWISE_JC
category     = Gene Models
glyph        = wormbase_transcript
bgcolor      = wheat
fgcolor      = black
forwardcolor = #999933
reversecolor = #666600
font2color   = blue
#pad_top      = sub {
#               return unless $_[4]->level > 0;
#               return (20-score_height(@_));
#       }
#height       = sub { score_height(@_)  }
#description  = 1
title        = Genewise gene $name
key          = Genewise genes (JC)
citation     = Evidence-based gene models generated by Genewise using C. elegans protein alignments.
               Analysis provided by Jack Chen.

[GENEWISE_JC:75000]
feature      = CDS:GENEWISE_JC
glyph        = generic
bgcolor      = sub {shift->strand>0?'#999933':'#666600'} 
height       = 12
strand_arrow = 1    

[CDS GENEWISE_JC]
feature      = coding:GENEWISE_JC
category    =  Gene Models
glyph        = cds  
frame0f      = cadetblue
frame1f      = blue   
frame2f      = darkblue
frame0r      = darkred
frame1r      = red   
frame2r      = crimson
description  = 0
height       = 13
label        = sub { "Frame usage for ".shift->name }
key          = Genewise frame usage (JC)
citation     = This track shows CDS reading frames.  At low magnifications, each transcript
        is shown as a "staff" of three lines.  Each line indicates a reading frame.  At high
        magnifications, the protein translation is shown.   

[HMMGENE]
feature      = wormbase_cds:HMMGENE
category     = Gene Models
glyph        = wormbase_transcript
bgcolor      = wheat
fgcolor      = black
forwardcolor = #6699FF
reversecolor = #0066CC
font2color   = blue
#pad_top      = sub {
#		return unless $_[4]->level > 0;
#		return (20-score_height(@_));
#	}
#height       = sub { score_height(@_)	}
description  = 1
title        = HMMGENE gene $name
key          = HMMGENE genes
citation     = These are ab initio gene predictions generated by HMMGENE trained on C. elegans gene models.
               Analysis provided by Ian Korf.

[HMMGENE:75000]
feature      = CDS:HMMGENE
glyph        = generic
bgcolor      = sub {shift->strand>0?'#6699FF':'#0066CC'}
height       = 12
strand_arrow = 1

[CDS HMMGENE]
feature      = coding:HMMGENE
category    =  Gene Models
glyph        = cds
frame0f      = cadetblue
frame1f      = blue
frame2f      = darkblue
frame0r      = darkred
frame1r      = red
frame2r      = crimson
description  = 0
height       = 13
label        = sub { "Frame usage for ".shift->name }
key          = HMMGENE frame usage
citation     = This track shows CDS reading frames.  At low magnifications, each transcript
	is shown as a "staff" of three lines.  Each line indicates a reading frame.  At high
	magnifications, the protein translation is shown.

[SNAP]
feature      = wormbase_cds:SNAP
category     = Gene Models
glyph        = wormbase_transcript
bgcolor      = wheat
fgcolor      = black
forwardcolor = #FF9933
reversecolor = #FF6600
font2color   = blue
#pad_top      = sub {
#		return unless $_[4]->level > 0;
#		return (20-score_height(@_));
#	}
#height       = sub { score_height(@_)	}
description  = 1
title        = SNAP gene $name
key          = SNAP genes
citation     = These are ab initio gene model predictions generated by SNAP using C. elegans parameters. 
	       Analysis provided by WashU.

[SNAP:75000]
feature      = CDS:SNAP
glyph        = generic
bgcolor      = sub {shift->strand>0?'FF9933':'#FF6600'}
height       = 12
strand_arrow = 1

[CDS SNAP]
feature      = coding:SNAP
category    =  Gene Models
glyph        = cds
frame0f      = cadetblue
frame1f      = blue
frame2f      = darkblue
frame0r      = darkred
frame1r      = red
frame2r      = crimson
description  = 0
height       = 13
label        = sub { "Frame usage for ".shift->name }
key          = SNAP frame usage
citation     = This track shows CDS reading frames.  At low magnifications, each transcript
	is shown as a "staff" of three lines.  Each line indicates a reading frame.  At high
	magnifications, the protein translation is shown.


##################################
#  Repeats, WABA, etc
##################################
[REP]
feature       = tandem_repeat inverted_repeat
category      = Misc
bgcolor       = bisque
fgcolor       = black
height        = 4
key           = Simple Repeats
connector     = none
citation      = This track indicates the position of short exact tandem and inverted repetitive 
                elements. Analysis provided by WashU.

[HMM]
feature       = similarity:hmmfs.3 repeat_region:RepeatMasker
category      = Misc
bgcolor       = red
fgcolor       = black
height        = 4
connector     = none
key           = Complex Repeats
citation      = This track contains matches to long repetitive elements detected using RECON. 
                Analysis provided by Zhirong Bao and Ning Jiang

[tRNA]
feature      = tRNA_primary_transcript:tRNA
category     = Gene Models
glyph        = full_transcript
#glyph        = sub {
#		my $feature = shift;
#		return 'full_transcript' if $feature->method =~ /transcript|UTR|coding_exon|full_transcript/i;
#		return 'transcript';
#	}
bgcolor      = white
fgcolor      = black
forwardcolor = violet
reversecolor = turquoise
utr_color    = gray
font2color   = blue
label        = shift->name
#label        = sub {
#		my $feature = shift;
#		my $desc = join ' ',$feature->notes;
#		my $name = $feature->display_name;
#		return $desc =~ /(\w{3,4}-\d+)$/ ? "$1 ($name)" : $name;
#	}
#height       = sub {
#	my $feature = shift;
#	return $feature->method =~  /transcript|UTR|coding_exon/i ? 10 : 6;
#	}
height        = 10
#description  = sub {
#	my $feature = shift;
#	my $notes = join ' ',$feature->notes;
#	my $source = $feature->source;
#        return "$notes ($source)" if $notes && $source; 
#        return $notes        if $notes && $feature->name !~ /^$notes/; 
#        return "($source)"   if $source; 
#        return '';
#        } 
title        = C. remanei tRNA $name
key          = tRNAs
citation     = tRNAs predicted by tRNAScan.  Analysis provided by WashU.


[BLASTZ_ELEGANS]
feature      = blastz_alignment_elegans
category     = Sequence Similarity Tracks
glyph        = merged_alignment
draw_target  = 1
bincolors    = gainsboro powderblue blue
bins         = 0-0.70 0.70-0.80 0.80-1
height       = 6
label = sub {   my $feature = shift;
                my $ref   = $feature->target;
                my $start = $feature->target->start;
                my $stop  = $feature->target->end;
                my $first = ($feature->segments)[0];
                my $strand = defined $first && $first->start>$first->end ? -1 : +1;
                ($start,$stop) = ($stop,$start) if $strand < 0;
                "$ref:$start..$stop";
        }
connector    = dashed
key          = BLASTZ alignments (C. elegans)
citation     = BLASTZ alignments between the C. remanei and C. elegans genomes. Analysis provided by Sheldon
               McKay.
link         = 0

[BLASTZ_ELEGANS:20000]
feature      = blastz_alignment_elegans
merge_parts  = 1

[BLASTZ_BRIGGSAE]
feature      = blastz_alignment_briggsae
category     = Sequence Similarity Tracks
glyph        = merged_alignment
bincolors    = gainsboro powderblue blue
bins         = 0-0.70 0.70-0.80 0.80-1
height       = 6
label = sub {   my $feature = shift;
                my $ref   = $feature->target;
                my $start = $feature->target->start;
                my $stop  = $feature->target->end;
                my $first = ($feature->segments)[0];
                my $strand = defined $first && $first->start>$first->end ? -1 : +1;
                ($start,$stop) = ($stop,$start) if $strand < 0;
                "$ref:$start..$stop";
        }
connector    = dashed
key          = BLASTZ alignments (C. briggsae)
citation     = BLASTZ alignments between the C. remanei and C. briggsae genomes. Analysis provided by Sheldon
               McKay.
link         = 0

[BLASTZ_BRIGGSAE:20000]
feature      = blastz_alignment_briggsae
merge_parts  = 1


[WABA_BRIGGSAE]
feature       = waba_alignment_briggsae
category      = Sequence Similarity Tracks
bgcolor       = blue
glyph         = heterogeneous_segments
waba_weak_color   = gainsboro
waba_strong_color = cornflowerblue
waba_coding_color = blue
fgcolor       = black
height        = 6
connector     = dashed
box_subparts  = 0
label = sub {	my $feature = shift;
		my $ref   = $feature->target;
		my $start = $feature->target->start;
		my $stop  = $feature->target->end;
	        my $first = ($feature->segments)[0];
                my $strand = defined $first && $first->start>$first->end ? -1 : +1;
		($start,$stop) = ($stop,$start) if $strand < 0;
	        "$ref:$start..$stop";
	}
#link = 	sub {
#		my $feature = shift;
#		my $ref   = $feature->target;
#		my $start = $feature->target->start;
#		my $stop  = $feature->target->end;
#	        my $first = ($feature->segments)[0];
#               my $strand = defined $first && $first->start>$first->end ? -1 : +1;
#		($start,$stop) = ($stop,$start) if $strand < 0;
#		return "/db/seq/ebsyn?name=$ref:$start..$stop";
#	}
key           = WABA alignments (C. briggsae)
citation      = These are segments of the C. remanei rough draft sequence that have been
	aligned to the C. briggsae genome using Jim Kent's WABA program [Kent & Zahler, 
	Genome Res 10:1115-25 (2000)].
	WABA distinguishes between low similarity regions (light blue), high-similarity regions
	(medium blue), and regions of high similarity that have the characteristic wobble-base
	mismatch of coding regions (dark blue).  Analysis provided by Darin Blaisir.

[WABA_BRIGGSAE:50000]
feature        = waba_alignment_briggsae
bgcolor        = gainsboro
merge_parts    = 1

[WABA_ELEGANS]
feature       = waba_alignment_elegans
category      = Sequence Similarity Tracks 
bgcolor       = blue
glyph         = heterogeneous_segments
waba_weak_color   = gainsboro
waba_strong_color = cornflowerblue
waba_coding_color = blue
fgcolor       = black
height        = 6
connector     = dashed
box_subparts  = 0
label = sub {   my $feature = shift;
                my $ref   = $feature->target;
                my $start = $feature->target->start;
                my $stop  = $feature->target->end;
                my $first = ($feature->segments)[0];
                my $strand = defined $first && $first->start>$first->end ? -1 : +1;
                ($start,$stop) = ($stop,$start) if $strand < 0;
                "$ref:$start..$stop";
        }
#link =  sub {
#                my $feature = shift;
#                my $ref   = $feature->target;
#                my $start = $feature->target->start;
#                my $stop  = $feature->target->end;
#                my $first = ($feature->segments)[0];
#                my $strand = defined $first && $first->start>$first->end ? -1 : +1;
#                ($start,$stop) = ($stop,$start) if $strand < 0;
#                return "/db/seq/ebsyn?name=$ref:$start..$stop";
#        }
key           = WABA alignments (C. elegans)
citation      = These are segments of the C. remanei rough draft sequence that have been
        aligned to the C. elegans  genome using Jim Kent's WABA program [Kent & Zahler,
        Genome Res 10:1115-25 (2000)].
        WABA distinguishes between low similarity regions (light blue), high-similarity regions
        (medium blue), and regions of high similarity that have the characteristic wobble-base
        mismatch of coding regions (dark blue). Analysis provided by Darin Blaisir.

[WABA_ELEGANS:50000]
feature        = waba_alignment_elegans
bgcolor        = gainsboro
merge_parts    = 1


######################################
#  BLAST / BLAT
######################################
[NEMATODE]
feature       = alignment:BLAT_NEMATODE
glyph         = segments
category      = Sequence Similarity Tracks
bgcolor       = lightblue
fgcolor       = black
height        = 5
connector     = solid
key           = Non-elegans ESTs
citation      = These are non-C. elegans nematode ESTs that have been aligned to
                 the C. remanei genome using Jim Kent's BLATX program [<a 
                 href="http://genome.cse.ucsc.edu/cgi-bin/hgBlat">http://genome.cse.ucsc.edu/cgi-bin/hgBlat</a>]. 
                 Analysis provided by Anthony Rogers. 

[NEMATODE:50000]
feature   = translated_nucleotide_match:BLAT_NEMATODE
glyph     = generic



[BLAT_OST]
feature       = expressed_sequence_match:BLAT_OST
glyph         = segments
category      = Sequence Similarity Tracks
draw_target   = 1
show_mismatch = 1   
ragged_start  = 1
bgcolor       = red
fgcolor       = black
connector     = solid
#group_pattern = /^OST[RF]/
#link          = http://worfdb.dfci.harvard.edu/search.pl?form=1;search=$name
#link_target   = _blank
key           = ORFeome sequence tags
citation      = This track shows C. elegans ORFeome project OSTs aligned to 
        the <i>C. elegans</i> genome using Jim Kent's BLAT program
        [<a href="http://genome.cse.ucsc.edu/cgi-bin/hgBlat">http://genome.cse.ucsc.edu/cgi-bin/hgBlat</a>].
        The <a href="http://worfdb.dfci.harvard.edu">ORFeome project</a> designs primer assays for spliced mRNAs and then
        performs sequence reads on rtPCR material, producing "OSTs."


[BLAT_EST]
feature        = alignment:BLAT_EST
glyph          = segments
category       = Sequence Similarity Tracks
draw_target    = 1
show_mismatch  = 1
ragged_start   = 1
bgcolor        = limegreen
fgcolor        = black
connector      = solid
height         = 5
group_pattern = /\.[35]$/
key            = ESTs aligned by BLAT
citation       = These are C. elegans expressed sequence tags (ESTs), that have been 
                 aligned to
                 the C. remanei genome using Jim Kent's BLAT program [<a href="http://genome.cse.ucsc.edu/cgi-bin/hgBlat">
                 http://genome.cse.ucsc.edu/cgi-bin/hgBlat</a>].
                 The 5' and 3' reads of a single EST are connected by a dashed line. 

[BLAT_EST:50000]
feature   = translated_nucleotide_match:BLAT_EST     
glyph     = generic


[BLATMRNA]
feature       = alignment:BLAT_mRNA alignment:BLAT_ncRNA
glyph         = segments
category      = Sequence Similarity Tracks
label         = sub {
                my $f = shift;
                my $label = ($f->source =~ /BLAT_mRNA/) ? 'mRNA' : 'ncRNA';
                my $name = $f->name;
                return "$label: $name";
        }
draw_target   = 1
show_mismach  = 1
ragged_start  = 1
bgcolor       = sub {   
                my $f = shift;
                return 'yellow' if ($f->source =~ /BLAT_mRNA/);
                return 'grey';
               }
fgcolor       = black
height        = 5
connector     = solid
key           = mRNAs/ncRNAs aligned by BLAT
citation      = These are C. elegans full length cDNAs and ncRNAs that have been aligned to
                the C. remanei genome using Jim Kent's BLAT program [<a href="http://genome.cse.ucsc.edu/cgi-bin/hgBlat">
                 http://genome.cse.ucsc.edu/cgi-bin/hgBlat</a>].   


[BLATMRNA:50000]
feature   = cDNA_match:BLAT_mRNA nucleotide_match:BLAT_ncRNA    


[BLASTX]
feature       = protein_match:wublastx
glyph         = segments
bgcolor       = sub { $_[0]->name =~ /^BP:/ ? 'blue' : 'orange' }
fgcolor       = black
category      = Sequence Similarity Tracks
height        = 5
key           = BLASTX Hits   
#link          = sub {
#                  my $feature = shift;
#                  my $name = $feature->name;
#                  if ($name =~ s/^TR://) {
#                     return sprintf("http://srs.ebi.ac.uk/srs6bin/cgi-bin/wgetz?-e+[SWALL-acc:%s]+-vn+2",$name);
#                  } elsif ($name =~ s/^SW://) {
#                     return sprintf("http://srs.ebi.ac.uk/srs6bin/cgi-bin/wgetz?-id+3LIc21HeBHW+-e+[SWALL:'%s']",$name);
#                  } elsif ($name =~ s/ENSEMBL://) {
#                     return sprintf('http://www.ensembl.org/Homo_sapiens/protview?peptide=%s',$name);
#                  } elsif ($name =~ s/GADFLY://) {
#                     return sprintf('http://hedgehog.lbl.gov:8002/cgi-bin/annot/query?namesearch=%s',$name);
#                  } elsif ($name =~ s/SGD://) {
#                     return sprintf('http://genome-www4.stanford.edu/cgi-bin/SGD/locus.pl?locus=%s',$name);
#                  } elsif ($name =~ s/PS://) {
#                     return sprintf('http://www.expasy.ch/cgi-bin/prosite-search-de?%s',$name);
#                  } else {
#                     return "/db/get?name=$name;class=Protein";
#                  }
#                }
citation =  These are WUBLASTX (nucleotide to protein, via six-frame
        translation) similarity hits from the genomes of yeast, fly, worm and human and subsets of 
        Swissprot and TREMBL.  Analysis provided by Anthony Rogers.

[TranslationF]
glyph        = translation
global feature = 1
frame0       = cadetblue
frame1       = blue
frame2       = darkblue
height       = 20
fgcolor      = purple
start_codons = 1
strand       = +1
arrow_height = 2
translation  = 3frame
key          = 3-frame translation (forward)
citation     = This track shows the position of stop codons at low magnifications,
	and the 3-frame translation at high magnifications.  Only the forward strand
	is shown.

[DNA/GC Content]
glyph          = dna
global feature = 1
strand         = both
height         = 40
fgcolor        = red

[TranslationR]
glyph        = translation
global feature = 1
frame0       = darkred
frame1       = red
frame2       = crimson
height       = 20
fgcolor      = blue
strand       = -1
start_codons = 1
arrow_height = 2
translation  = 3frame
key          = 3-frame translation (reverse)
citation     = This track shows the position of stop codons at low magnifications,
	and the 3-frame translation at high magnifications.  Only the reverse
	strand is shown.


######################
# Physical map (done)     
######################
[Component]
feature       = region:Genomic_canonical
key           = Contigs
bgcolor       = black
fgcolor       = black
category      = Misc
bump          = 1
height        = 7
tick          = 2
glyph         = arrow
label         = 1
relative_coords = 1
citation      = This tracks shows the location and coordinates of contigs.

[Component:overview]
feature       = region:Genomic_canonical
bgcolor       = black
fgcolor       = black
label         = 0
bump          = 1
key           = C. remanei contigs
glyph         = generic
label         = 0

[LINK]
feature       = region:Link
fgcolor       = black
glyph         = arrow
category      = Misc 
height        = 7
tick          = 2   
relative_coords = 1
key           = Links and Superlinks
citation      = This track shows the location and coordinates of contigs
                created during the assembly of the C. remanei genome.
