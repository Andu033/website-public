[GENERAL]
description = C. briggsae (current release)
adaptor     = dbi::mysqlopt
database    = dbi:mysql:database=briggsae;host=localhost
aggregators = wormbase_cds{coding_exon/CDS} hybrid_temp{hybrid} waba_alignment coding{coding_exon} alignment
user        = nobody
passwd      =

# Installed plugins
plugins = Aligner
	  FastaDumper 
          OligoFinder RestrictionAnnotator
	  GFFDumper
	  BatchDumper
	  #Spectrogram
	  #PrimerDesigner

#quicklink plugins = Spectrogram PrimerDesigner

# Web site configuration info
stylesheet  = /gbrowse/briggsae.css
buttons     = /gbrowse/images/buttons
tmpimages   = /ace_images/gbrowse


# Quick links for page header
quicklink   = Old_release:/db/seq/gbrowse/briggsae_cb25


# Default glyph settings
glyph       = generic
height      = 8
bgcolor     = cyan
fgcolor     = black
label density = 25
bump density  = 100
keystyle = between
empty_tracks = key

landmark features = supercontig

header = sub {
	require ElegansSubs;
	require CGI;
        use constant DASVIEW => '/db/searches/dasview';
	$Ace::Browser::AceSubs::TOP = 0;
	my $result = ElegansSubs::Banner().
	             CGI::h1('<i>C. briggsae</i> build cb3').
		     CGI::h3(CGI::a({-href=>"/db/seq/gbrowse/briggsae_cb25"},
		     CGI::font({-color=>'green'},CGI::i('Take me to the old version (cb25.agp8)!'))));
	sub score_height { 
				my $feature = shift;
				my $score = $feature->score;
				my $log_score = $score <= 0 ? 0 : log $score;
				my $height    =  $log_score * 5;
				return $height < 8  ? 8 
			             : $height > 20 ? 20
			             : $height;
			}
	$result;
	}

footer = sub {
	print '
	<hr>
	<table width="100%">
	<TR>
	<TD align="LEFT" class="databody">
	For the source code for this browser, see the <a href="http://www.gmod.org">
	Generic Model Organism Database Project.</a>  For other questions, send
	mail to <a href="mailto:lstein@cshl.org">lstein@cshl.org</a>.
	</TD>
	</TR>
	</table>';
	ElegansSubs::ElegansSearchBar();
	print ElegansSubs::Footer();
	return;
	}



# where to link to when user clicks in detailed view
link          = gbrowse?name=$name;source=briggsae

# what image widths to offer
image widths  = 450 640 800 960 1024 1280

# default width of detailed view (pixels)
default width = 800
default features = WBG WABA UC:overview

# max and default segment sizes for detailed view
max segment = 1000000
default segment = 50000

# low-res boundary
low res = 200000

# standard zoom levels to be offered to user
zoom levels    = 100 500 1000 5000 10000 20000 40000 100000 200000 500000 1000000

# fine zoom to be offered -- please provide a percentage
fine zoom      = 20%

# canonical features to show in overview
overview bgcolor = turquoise

# examples to show in the introduction
examples = chrI:80000..120000 chrV cb25.fpc3752
	   
# "automatic" classes to try when an unqualified identifier is given
automatic classes = Protein Component CDS Sequence

# List of remote annotation sources: format is URL/name pairs separated by
# white space.  Please use quotation marks to prevent internal spaces from
# being interpreted.
# remote sources = 


##################################################################################
# the remainder of the sections configure particular tracks to show
##################################################################################

[WBG]
feature      = wormbase_cds:curated wormbase_cds:history
glyph        = full_transcript
forwardcolor = violet
reversecolor = turquoise
key          = curated gene
fgcolor      = black
font2color   = blue
height       = 10
description  = sub { my @notes = shift->notes; join '; ',@notes }
link         = /db/gene/gene?name=$name
title        = curated gene $name
category     = Genes
#strand_arrow = 1

#[HYB]
#feature      = wormbase_cds:hybrid
#glyph        = full_transcript
#forwardcolor = violet
#reversecolor = turquoise
#key          = hybrid gene (TEMP)
#fgcolor      = black
#font2color   = blue
#height       = 10
#description  = sub { my @notes = shift->notes; join '; ',@notes }
#link         = /db/gene/gene?name=$name
#title        = curated gene $name
#category     = Genes
#strand_arrow = 1

[CDS WBG]
feature      = coding:curated
glyph        = cds
frame0f      = cadetblue
frame1f      = blue
frame2f      = darkblue
frame0r      = darkred
frame1r      = red
frame2r      = crimson
description  = 0
height       = 13
label        = sub { "Frame usage for ".shift->name }
key          = Curated gene frame usage
citation     = This track shows CDS reading frames.  At low magnifications, each transcript
               is shown as a "staff" of three lines.  Each line indicates a reading frame.  At high
               magnifications, the protein translation is shown.
category     = Genes


[WABA]
feature           = waba_alignment
bgcolor           = blue
glyph             = heterogeneous_segments
waba_weak_color   = #E0E0E0
waba_strong_color = cornflowerblue
waba_coding_color = blue
fgcolor           = black
height            = 6
connector         = dashed
box_subparts      = 0
label             = sub {	
			my $feature = shift;
			my $ref   = $feature->target;
			my $start = $feature->target->start;
			my $stop  = $feature->target->end;
	       		my $first = ($feature->segments)[0];
                	my $strand = defined $first && $first->start>$first->end ? -1 : +1;
			($start,$stop) = ($stop,$start) if $strand < 0;
	        	"$ref:$start..$stop";
		    }
key           = WABA alignments to elegans
citation      = These are segments of the C. briggsae rough draft sequence that have been
		aligned to the C. elegans genome using Jim Kent's WABA program [Kent & Zahler, 
		Genome Res 10:1115-25 (2000)].
		WABA distinguishes between low similarity regions (light blue), high-similarity regions
		(medium blue), and regions of high similarity that have the characteristic wobble-base
		mismatch of coding regions (dark blue).  Also see "Briggsae Alignments (BLAST)".
category     = Comparative Genomics

[BRIGEST]
feature       = alignment:BLAT_briggsae_est
glyph         = segments
bgcolor       = limegreen
fgcolor       = black
height        = 4
connector     = solid
key           = C. briggsae ESTs
link          = http://www.ncbi.nlm.nih.gov/htbin-post/Entrez/query?db=n&form=1&field=Sequence+ID&term=$name
citation      = These are C. briggsae ESTs that have been aligned to the briggsae genome using BLAT.
category      = Genes

[EEST]
feature       = alignment:BLAT_elegans_est
glyph         = segments
bgcolor       = yellow
fgcolor       = black
height        = 4
connector     = solid
key           = BLAT C. elegans ESTs
link          = http://www.ncbi.nlm.nih.gov/htbin-post/Entrez/query?db=n&form=1&field=Sequence+ID&term=$name
citation      = These are C. elegans ESTs that have been aligned to 
	        the briggsae genome using BLAT.
category      = Comparative Genomics

[EOST]
feature       = alignment:BLAT_elegans_ost
glyph         = segments
bgcolor       = red
fgcolor       = red
height        = 4
connector     = solid
key           = BLAT C. elegans OSTs
link          = http://www.ncbi.nlm.nih.gov/htbin-post/Entrez/query?db=n&form=1&field=Sequence+ID&term=$name
citation      = These are C. elegans OSTs (Orpheome Sequence Tags) that have been aligned to
                the briggsae genome using BLAT.
category      = Comparative Genomics


[ERNA]
feature       = alignment:BLAT_elegans_mRNA
glyph         = segments
bgcolor       = greenyellow
fgcolor       = black
height        = 4
connector     = solid
key           = BLAT C. elegans mRNAs
link          = http://www.ncbi.nlm.nih.gov/htbin-post/Entrez/query?db=n&form=1&field=Sequence+ID&term=$name
citation      = These are C. elegans mRNAs that have been aligned to the briggsae genome using BLAT.
category      = Comparative Genomics

[TranslationF]
glyph        = translation
global feature = 1
frame0       = cadetblue
frame1       = blue
frame2       = darkblue
height       = 20
fgcolor      = purple
start_codons = 1
strand       = +1
arrow_height = 2
translation  = 3frame
key          = 3-frame translation (forward)
citation     = This track shows the position of stop codons at low magnifications,
	and the 3-frame translation at high magnifications.  Only the forward strand
	is shown.
category      = Analysis

[DNA/GC Content]
glyph          = dna
global feature = 1
strand         = both
height         = 40
fgcolor        = red
category      = Analysis

[TranslationR]
glyph        = translation
global feature = 1
frame0       = darkred
frame1       = red
frame2       = crimson
height       = 20
fgcolor      = blue
strand       = -1
start_codons = 1
arrow_height = 2
translation  = 3frame
key          = 3-frame translation (reverse)
citation     = This track shows the position of stop codons at low magnifications,
	and the 3-frame translation at high magnifications.  Only the reverse
	strand is shown.
category      = Analysis

[UC:overview]
feature       = Sequence:Genomic_canonical
strand_arrow  = 1
height        = 3
bgcolor       = white
fgcolor       = black
bump          = 1
key           = Mapped Ultracontigs
label         = 1
link	      = /db/seq/gbrowse/briggsae_cb25?name=$name

#[BAC_END]
#feature       = nucleotide_match:BLAT_BAC_END
#bgcolor       = black
#fgcolor       = black
#label         = 0
#bump          = 1
#key           = BAC ends
#glyph         = generic
#link          = sub { return undef; }
#category      = Assembly

#[GAP]
#feature       = Sequence:.
#bgcolor       = black
#fgcolor       = black
#label         = 0
#bump          = 1
#key           = Ultracontig gaps
#glyph         = generic
#link          = sub { return undef; }
#category      = Assembly

#[SNP]
#feature       = polymorphism
#bgcolor       = red
#fgcolor       = red
#label         = 0
#description   = 1
#bump          = 1
#key           = SNPs
#glyph         = triangle
#point         = 1
#orient        = N
#height        = 6
#category      = Variation

#[RFLP]
#feature       = rflp_polymorphism
#bgcolor       = blue
#fgcolor       = blue
#height        = 6
#label         = 0
#description   = 1
#bump          = 1
#key           = RFLPs
#glyph         = triangle
#point         = 1
#orient        = N
#category      = Variation
